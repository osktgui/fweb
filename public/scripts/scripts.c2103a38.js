"use strict";angular.module("filiumApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","datePicker","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/landing.html",controller:"LandingCtrl"}).when("/landing",{templateUrl:"views/landing.html",controller:"LandingCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("filiumApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("filiumApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("filiumApp").directive("onlynumber",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0===a)return"";var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("filiumApp").controller("LandingCtrl",["$rootScope","$scope","$window","filiumServices",function(a,b,c,d){function e(a){function b(a){return a>12?"p.m.":"a.m."}function c(a){return a>12&&(a-=12),d(a)}function d(a){return 10>a?"0"+a:a}var e=parseInt(a.substring(0,2)),f=parseInt(a.substring(3,5)),g=60*e+f,h=g+45,i=parseInt(h/60),j=h%60;return"De "+c(e)+":"+d(f)+" "+b(e)+" hasta "+c(i)+":"+d(j)+" "+b(i)}function f(a){for(var b=parseInt(a.substring(0,2)),c=parseInt(a.substring(3,5)),d=60*b+c,e=0;e<h.length;e++)if(d===h[e])return!1;return h.push(d),!0}function g(){i?(angular.element(".landing-contact-bg-2").css("opacity","0"),i=!1):(angular.element(".landing-contact-bg-2").css("opacity","1"),i=!0)}b.landing={},b.variable={},$("#landDate").change(function(){var a={};a.fechaCita=angular.element("#landDate").val(),angular.element("#landSchedule").empty(),angular.element("#landSchedule").prop("disabled","disabled"),angular.element("#landSchedule").append('<option value="" disabled selected>Cargando horarios ...</option>'),d.getHorarios(a).then(function(a){angular.element("#landSchedule").empty(),angular.element("#landSchedule").removeAttr("disabled"),angular.element("#landSchedule").append('<option value="" disabled selected>Horarios Disponibles</option>'),h=[],angular.element.each(a,function(a,b){if(f(b.hora)&&b.disponible){var c=e(b.hora);angular.element("#landSchedule").append('<option value="'+b.horarioDisponibleId+'">'+c+"</option>")}})})}),b.reservarCita=function(a){if(!a.$invalid)if(b.variable.terminos){angular.element("#landing-terminos-condiciones").removeClass("error");var c={};c.nombre=b.landing.names,b.variable.llamada?c.metodoContacto="llamada":b.variable.skype&&(c.metodoContacto="skype"),c.celular=b.landing.phone,c.skype=b.landing.skype,c.correo=b.landing.email,c.horario=b.landing.schedule,d.saveCita(c).then(function(a){"LeadRegistrado"===a?angular.element("#SuccessModal").modal({keyboard:!1,backdrop:"static"}):"HorarioNoDisponible"===a&&angular.element("#ErrorModal").modal()})}else angular.element("#landing-terminos-condiciones").addClass("error")},b.reloadRoute=function(){c.location.reload()};var h=[],i=(setInterval(g,8e3),!0)}]),angular.module("filiumApp").directive("names",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0===a)return"";var b=a.replace(/[^A-Za-zÑñáéíóúÁÉÍÓÚ ]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("filiumApp").directive("telefono",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0===a)return d.$setValidity("telefono",!0),"";var b=a.replace(/[^0-9]/g,"");if(b!==a)return d.$setViewValue(b),d.$render(),!1;var c=/(\d)\1{8}/g.test(a),e=/^9/.test(a);return d.$setValidity("telefono",!c&&e&&9===a.length),a})}}}),angular.module("filiumApp").directive("skype",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0===a)return d.$setValidity("telefono",!0),"";var b=a.replace(/[^A-Za-z0-9.]/g,"");return b!==a?(d.$setViewValue(b),d.$render(),!1):a})}}}),angular.module("filiumApp").factory("pageConfig",function(){return{baseUrl:""}}),angular.module("filiumApp").service("filiumServices",["$http","$q","pageConfig",function(a,b,c){function d(b){var c=a({method:"get",url:"leerHorariosDisponibles",params:{fechaCita:b.fechaCita.replace(/\//g,"-")}});return c.then(g,f)}function e(b){var c=a({method:"get",url:"registrarLead",params:{nombre:b.nombre,metodoContacto:b.metodoContacto,celular:b.celular,skype:b.skype,correo:b.correo,horario:b.horario}});return c.then(g,f)}function f(a){return angular.isObject(a.data)&&a.data.message?b.reject(a.data.message):b.reject("An unknown error occurred.")}function g(a){return a.data}return{getHorarios:d,saveCita:e}}]),angular.module("filiumApp").run(["$templateCache",function(a){a.put("views/landing.html",'<div class="landing-contact-bg"> <div class="landing-contact-bg-2"></div> </div> <div class="landing-contact-section"> <div class="common-conteiner align-right"> <div class="landing-main-menu"> <div class="landing-main-menu-item"><a href="#">Blog</a></div> <div class="landing-main-menu-item"><a href="#">Contáctenos</a></div> <div class="landing-main-menu-item"><a href="#">Login</a></div> <div class="landing-main-menu-item button"><a href="#">Registro</a></div> </div> </div> <div class="common-conteiner"> <div class="landing-logo"><i></i></div> </div> <div class="common-conteiner align-right"> <form name="formLanding" class="landing-form"> <div class="landing-form-title">Inicia tu cita en línea gratuita </div> <div class="landing-form-group"> <input type="text" name="landName" id="landName" ng-model="landing.names" placeholder="Nombres y Apellidos" maxlength="50" ng-class="{error: landingSubmit &amp;&amp; formLanding.landName.$invalid}" names="names" required class="landing-form-input"> </div> <div class="landing-form-contact-way"> <div id="landing-form-contact-way-text" class="landing-form-contact-way-text">Elige el método de contacto:</div> <div class="landing-form-contact-way-options"><a href="javascript:void(0)" ng-click="variable.llamada=true; variable.skype=false;" ng-class="{active: variable.llamada}" class="button-to-contact call-button">Llamada Telefónica<i></i></a> <div class="landing-form-contact-way-options-text">ó</div><a href="javascript:void(0)" ng-click="variable.llamada=false; variable.skype=true;" ng-class="{active: variable.skype}" class="button-to-contact variable skype-button">Skype<i></i></a> </div> </div> <div ng-show="variable.llamada" class="landing-form-group"> <input type="text" name="landPhone" id="landPhone" ng-model="landing.phone" maxlength="9" placeholder="Número de Celular" ng-required="variable.llamada" ng-class="{error: landingSubmit &amp;&amp; formLanding.landPhone.$invalid}" telefono="telefono" class="landing-form-input"> </div> <div class="space-vertical"></div> <div ng-show="variable.skype" class="landing-form-group"> <input type="text" name="landSkype" id="landSkype" ng-model="landing.skype" maxlength="32" ng-minlength="6" placeholder="Usuario de Skype" ng-required="variable.skype" ng-class="{error: landingSubmit &amp;&amp; formLanding.landSkype.$invalid}" skype="skype" class="landing-form-input"> </div> <div class="space-vertical"></div> <div ng-show="variable.llamada || variable.skype" class="landing-form-group"> <input type="text" name="landEmail" id="landEmail" ng-model="landing.email" placeholder="Correo Electrónico" ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\\.[a-z.]{2,5}$/" ng-class="{error: landingSubmit &amp;&amp; formLanding.landEmail.$invalid}" required class="landing-form-input"> </div> <div ng-init="loadHorarios=false" class="space-vertical"></div> <div ng-show="variable.llamada || variable.skype" class="landing-form-group"> <input type="text" name="landDate" id="landDate" ng-model="landing.date" format="dd/MM/yyyy" ng-init="showSchedule=false" ng-minlength="10" ng-maxlength="10" placeholder="Elige la Fecha" ng-blur="showSchedule=true" ng-class="{error: landingSubmit &amp;&amp; !showSchedule}" readonly class="landing-form-input"> </div> <div class="space-vertical"></div> <div ng-show="showSchedule &amp;&amp; formLanding.landDate.$valid" class="landing-form-group"> <select type="text" name="landSchedule" id="landSchedule" ng-model="landing.schedule" ng-class="{error: landingSubmit &amp;&amp; formLanding.landSchedule.$invalid, succes: formLanding.landSchedule.$valid}" required class="landing-form-input landing-select"> <option value="" disabled>Cargando horarios ...</option> </select> </div> <div class="landing-form-terms-conditions"> <div ng-click="variable.terminos= !variable.terminos;rmvError(\'landing-terminos-condiciones\');" class="landing-rbtn"><i ng-class="{active: variable.terminos}"></i></div> <div id="landing-terminos-condiciones" class="landing-form-terms-conditions-text">Acepta los <a href="#">términos y condiciones </a>*</div> </div> <div class="landing-form-button"><a href="javascript:void(0)" ng-click="reservarCita(formLanding);landingSubmit=true;" class="landing-primary-button">Reservar tu cita</a></div> </form> </div> <div class="common-conteiner"> <div class="landing-invitation-message">- Programa tu terapia psicológica en el momento más cómodo para tí -</div> </div> </div> <div class="landing-phrase"> <div class="landing-phrase-content">“Alguna veces he tenido que postergar mi visita al psicólogo porque el trabajo y el estudio me tienen la mayor parte del tiempo ocupada, pero ahora con Filium puedo seguir llevando mi terapia psicológica sin salir de casa, además evito el estrés del tráfico y los tiempos de desplazamiento”<i></i></div> <div class="common-conteiner"> <div class="landing-phrase-author">Diana E, Lima - Perú<i></i></div> </div> <div class="common-conteiner landing-dots"><i></i></div> </div> <div class="landing-phrase-shadow"></div> <div class="landing-caricature-section"> <div class="landing-caricature-section-title">“ Bienestar emocional en cada situación de la vida ”</div> <div class="landing-caricature-content-ask">¿Sabías que?</div> <div class="landing-caricature-content"> <div class="landing-caricature-content-cloud"><i></i></div> <div class="landing-caricature-speakcloud-left"><i></i> <div class="landing-caricature-speakcloud-left-text">La depresión, a nivel mundial, está clasificada como la causa más importante de discapacidad en la salud humana?.</div> </div> <div class="landing-caricature-speakcloud-right"><i> <div class="landing-caricature-speakcloud-right-text">Una de cada cuatro personas en el mundo padece alguna enfermedad mental a lo largo de su vida.</div></i></div> <div class="landing-caricature-psychologist"><i></i></div> </div> <div class="landing-message-pos-caricature">"No estás solo: Aprende y disfruta de cada momento de la vida, un psicólogo de Filium te ayudará a conseguir el bienestar emocional que todos necesitamos"</div> <div class="landing-caricature-content-cloud-right"><i></i></div> <div class="landing-only-logo"><i></i></div> <div class="landing-caricature-presentation-title">Para ello nació Filium</div> <div class="landing-caricature-presentation-content"> <div class="landing-caricature-presentation-description"> <p>Filium te brinda atención psicológica por video consulta o llamada en el momento que necesites y desde el lugar más cómodo para ti. </p> <p class="landing-presentation-centerline">“Confía en Filium”</p> <p> <div class="landing-title-line">Profesionalismo:</div>Contamos con una Red de psicólogos clínicos colegiados con alta vocación de servicio y nos preocupamos que tengan una buena dosis de sensibilidad y empatía, para que sean capaces de ayudarte en encontrar el equilibrio emocional necesario para tu vida. </p> <p> <div class="landing-title-line">Confidencialidad:</div>Hemos establecido un código de ética en beneficio de preservar intacto el secreto profesional. </p> <p> <div class="landing-title-line">Accesibilidad:</div>Invertimos en mantener una plataforma virtual de fácil acceso para que tu terapia se desarrolle sin inconvenientes. </p> </div> </div> </div> <div class="landing-video-section"> <div class="landing-video-play">Ver video<i></i></div> </div> <div class="landing-footer-bg"> <div class="landing-footer-column"> <div class="landing-footer-teamrequest">¿Quieres formar parte de nuestro equipo de psicólogos?</div><a href="#" class="landing-footer-teamrequest-btn">Conocer mas</a> </div> <div class="landing-footer-column"> <div class="landing-footer-menu"> <div class="landing-footer-menu-item"><a href="#">Nosotros</a></div> <div class="landing-footer-menu-item"><a href="#">Contáctenos</a></div> <div class="landing-footer-menu-item"><a href="#">Blog</a></div> </div> <form name="landingFooterForm"> <div class="landing-footer-form-info">Ingresa tu correo para mantenernos conectados</div> <input type="text" class="landing-footer-form-input"> </form> <div class="landing-footer-social"><a href="#" class="social-icon facebook"><i></i></a><a href="#" class="social-icon twitter"><i></i></a><a href="#" class="social-icon youtube"><i></i></a></div> <div class="landing-footer-copyright">© Filium 2015. Todos los derechos reservados.</div> </div> <div class="landing-footer-column"> <div class="landing-footer-phone-info">Linea Abierta para atención psicologica</div> <div class="landing-footer-phone-number">(01) 9238183<i></i></div> </div> </div> <div class="landing-footer-bg-smart"> <div class="landing-footer-column"> <div class="landing-footer-menu"> <div class="landing-footer-menu-item"><a href="#">Nosotros</a></div> <div class="landing-footer-menu-item"><a href="#">Contáctenos</a></div> <div class="landing-footer-menu-item"><a href="#">Blog</a></div> </div> <div class="landing-footer-teamrequest">¿Quieres formar parte de nuestro equipo de psicólogos?</div><a href="#" class="landing-footer-teamrequest-btn">Conocer mas</a> <div class="landing-footer-phone-info">Linea Abierta para atención psicologica</div> <div class="landing-footer-phone-number">(01) 9238183<i></i></div> <form name="landingFooterForm"> <div class="landing-footer-form-info">Ingresa tu correo para mantenernos conectados</div> <input type="text" class="landing-footer-form-input"> </form> <div class="landing-footer-social"><a href="#" class="social-icon facebook"><i></i></a><a href="#" class="social-icon twitter"><i></i></a><a href="#" class="social-icon youtube"><i></i></a></div> <div class="landing-footer-copyright">© Filium 2015. Todos los derechos reservados.</div> </div> </div> <div id="SuccessModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" class="modal fade"> <div role="document" class="modal-dialog modal-md"> <div class="modal-content"> <div class="modal-header"> <h4 id="myModalLabel" class="modal-title popup-header-title">¡Muy bien! Tu cita ha sido reservada.</h4> </div> <div class="modal-body">¡Felicidades {{landing.names}}, ahora eres parte de Filium! Pronto nos pondrémos en contacto contigo. Toda la información de la cita será enviada al correo registrado: {{landing.email}}</div> <div class="modal-footer"> <button type="button" ng-click="reloadRoute()" class="landing-primary-button landing-popup-button">Aceptar</button> </div> </div> </div> </div> <div id="ErrorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" class="modal fade"> <div role="document" class="modal-dialog modal-md"> <div class="modal-content"> <div class="modal-header"> <h4 id="myModalLabel" class="modal-title popup-header-title">No se pudo reservar la cita.</h4> </div> <div class="modal-body">Lo sentimos, alguien más acaba de reservar el horario seleccionado, elige otro horario para continuar.</div> <div class="modal-footer"> <button type="button" data-dismiss="modal" class="landing-primary-button landing-popup-button">Aceptar</button> </div> </div> </div> </div> <script type="text/javascript">var diasDisponibles = [];\n  $(\'#landDate\').attr(\'placeholder\',\'Cargando días...\');\n  $("#landDate").prop(\'disabled\', \'disabled\');\n  consultaDiasDisponibles();\n  function consultaDiasDisponibles(){\n   $.ajax({\n    type: "GET",\n    url: "leerDiasDisponibles",\n    dataType: "json",\n    success : function(data) \n    {\n     $.each(data,function(id,item){\n      a = parseInt(item.substring(0,4));\n      m = parseInt(item.substring(5,7));\n      d = parseInt(item.substring(8,10));\n      fechaPush = d+\'-\'+m+\'-\'+a;\n      diasDisponibles.push(fechaPush);\n     })\n     $(\'#landDate\').attr(\'placeholder\',\'Elige la Fecha\');\n     $("#landDate").removeAttr(\'disabled\');\n    },\n    error: function() \n    {\n    \n    }\n   });\n  }\n  \n  var availableDates = diasDisponibles;\n  function available(date) {\n   dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();\n   if ($.inArray(dmy, availableDates) != -1) {\n    return [true, "","Available"];\n   } else {\n    return [false,"","unAvailable"];\n   }\n   \n  }\n  $.noConflict();\n  $(\'#landDate\').datepicker({ beforeShowDay: available });\n  \n  $.datepicker.regional[\'es\'] = {\n   closeText: \'Cerrar\',\n   prevText: \'<Ant\',\n   nextText: \'Sig>\',\n   currentText: \'Hoy\',\n'+"   monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],\n   monthNamesShort: ['Ene','Feb','Mar','Abr', 'May','Jun','Jul','Ago','Sep', 'Oct','Nov','Dic'],\n   dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],\n   dayNamesShort: ['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],\n   dayNamesMin: ['Do','Lu','Ma','Mi','Ju','Vi','Sá'],\n   weekHeader: 'Sm',\n   dateFormat: 'dd/mm/yy',\n   firstDay: 1,\n   isRTL: false,\n   showMonthAfterYear: false,\n   yearSuffix: ''\n  };\n  $.datepicker.setDefaults($.datepicker.regional['es']);</script>")}]);